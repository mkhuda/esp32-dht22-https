var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,n,s){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(n,s))}function r(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function p(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}function g(t,e,n,s){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}let v;function w(t){v=t}function b(t){(function(){if(!v)throw new Error("Function called outside component initialization");return v})().$$.on_mount.push(t)}const y=[],x=[],_=[],k=[],S=Promise.resolve();let C=!1;function E(t){_.push(t)}const L=new Set;let T=0;function P(){const t=v;do{for(;T<y.length;){const t=y[T];T++,w(t),I(t.$$)}for(w(null),y.length=0,T=0;x.length;)x.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];L.has(e)||(L.add(e),e())}_.length=0}while(y.length);for(;k.length;)k.pop()();C=!1,L.clear(),w(t)}function I(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const q=new Set;let A;function D(t,e){t&&t.i&&(q.delete(t),t.i(e))}function M(t,e,n,s){if(t&&t.o){if(q.has(t))return;q.add(t),A.c.push((()=>{q.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}function N(t){t&&t.c()}function j(t,n,i,c){const{fragment:r,on_mount:u,on_destroy:a,after_update:l}=t.$$;r&&r.m(n,i),c||E((()=>{const n=u.map(e).filter(o);a?a.push(...n):s(n),t.$$.on_mount=[]})),l.forEach(E)}function G(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function H(t,e){-1===t.$$.dirty[0]&&(y.push(t),C||(C=!0,S.then(P)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(e,o,i,c,r,u,l,d=[-1]){const f=v;w(e);const p=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(f?f.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:o.target||f.$$.root};l&&l(p.root);let h=!1;if(p.ctx=i?i(e,o.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return p.ctx&&r(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),h&&H(e,t)),n})):[],p.update(),h=!0,s(p.before_update),p.fragment=!!c&&c(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(a)}else p.fragment&&p.fragment.c();o.intro&&D(e.$$.fragment),j(e,o.target,o.anchor,o.customElement),P()}w(f)}class z{$destroy(){G(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const O=[];function R(e,n=t){let s;const o=new Set;function c(t){if(i(e,t)&&(e=t,s)){const t=!O.length;for(const t of o)t[1](),O.push(t,e);if(t){for(let t=0;t<O.length;t+=2)O[t][0](O[t+1]);O.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(i,r=t){const u=[i,r];return o.add(u),1===o.size&&(s=n(c)||t),i(e),()=>{o.delete(u),0===o.size&&(s(),s=null)}}}}const B=R("home"),F=R(!0),K=()=>{F.update((t=>!0))},J=()=>{F.update((t=>!1))},Q=()=>{B.update((t=>"home"))},U=()=>{B.update((t=>"setting"))},V=async(t,e)=>(await fetch(t,{method:e})).json();function X(e){let n,o,i,c,g,v,w,b,y,x,_,k,S,C,E,L,T,P,I,q,A,D,M,N,j,G,H,W,z,O,R,B,F,K,J,Q,U,V,X,Y,Z,tt,et,nt,st,ot,it,ct,rt=1==e[0].connection?"Connected":"Not connected",ut=(e[0].ip?e[0].ip:"loading")+"",at=(e[0].deviceSerial?e[0].deviceSerial:"loading")+"";return{c(){n=l("div"),o=l("div"),o.textContent="Keepomap Router",i=f(),c=l("div"),c.textContent="Let's setup your device!",g=f(),v=l("p"),w=f(),b=l("div"),y=l("input"),x=f(),_=l("div"),k=f(),S=l("label"),S.textContent="Wifi SSID",C=f(),E=l("div"),L=l("input"),T=f(),P=l("div"),I=f(),q=l("label"),q.textContent="Wifi Password",A=f(),D=l("button"),D.textContent="Set",M=f(),N=l("p"),j=l("span"),j.textContent="Wifi Status:",G=f(),H=l("span"),W=d(rt),z=f(),O=l("p"),R=l("span"),R.textContent="Local IP address:",B=f(),F=l("span"),K=d(ut),J=f(),Q=l("p"),U=l("span"),U.textContent="Device Serial:",V=f(),X=l("span"),Y=d(at),Z=f(),tt=l("button"),tt.textContent="Get latest status",et=f(),nt=l("button"),nt.textContent="Reboot",st=f(),ot=l("p"),h(o,"class","title"),h(c,"class","subtitle"),h(v,"id","setStatus"),h(v,"class","white"),h(y,"id","wifiSSID"),h(y,"class","input"),h(y,"type","text"),h(y,"placeholder"," "),h(_,"class","cut"),h(S,"for","wifiSSID"),h(S,"class","placeholder"),h(b,"class","input-container ic2"),h(L,"id","wifiPassword"),h(L,"class","input"),h(L,"type","password"),h(L,"placeholder"," "),h(P,"class","cut"),h(q,"for","wifiPassword"),h(q,"class","placeholder"),h(E,"class","input-container ic2"),h(D,"type","text"),h(D,"class","submit"),h(H,"class","wifi-status"),h(N,"id","status"),h(N,"class","white"),h(F,"class","wifi-status"),h(O,"id","sysinfo"),h(O,"class","white"),h(X,"class","wifi-status"),h(Q,"id","sysinfo"),h(Q,"class","white"),h(tt,"type","text"),h(tt,"class","info"),h(nt,"type","text"),h(nt,"class","reboot"),h(ot,"id","rebootInfo"),h(ot,"class","white"),h(n,"class","container")},m(t,s){u(t,n,s),r(n,o),r(n,i),r(n,c),r(n,g),r(n,v),r(n,w),r(n,b),r(b,y),$(y,e[0].ssid),r(b,x),r(b,_),r(b,k),r(b,S),r(n,C),r(n,E),r(E,L),$(L,e[0].password),r(E,T),r(E,P),r(E,I),r(E,q),r(n,A),r(n,D),r(n,M),r(n,N),r(N,j),r(N,G),r(N,H),r(H,W),r(n,z),r(n,O),r(O,R),r(O,B),r(O,F),r(F,K),r(n,J),r(n,Q),r(Q,U),r(Q,V),r(Q,X),r(X,Y),r(n,Z),r(n,tt),r(n,et),r(n,nt),r(n,st),r(n,ot),it||(ct=[p(y,"input",e[4]),p(L,"input",e[5]),p(D,"click",e[2]),p(tt,"click",e[1]),p(nt,"click",e[3])],it=!0)},p(t,[e]){1&e&&y.value!==t[0].ssid&&$(y,t[0].ssid),1&e&&L.value!==t[0].password&&$(L,t[0].password),1&e&&rt!==(rt=1==t[0].connection?"Connected":"Not connected")&&m(W,rt),1&e&&ut!==(ut=(t[0].ip?t[0].ip:"loading")+"")&&m(K,ut),1&e&&at!==(at=(t[0].deviceSerial?t[0].deviceSerial:"loading")+"")&&m(Y,at)},i:t,o:t,d(t){t&&a(n),it=!1,s(ct)}}}function Y(t,e,n){let s={};const o=()=>{K(),V("/sysinfo","GET").then((t=>{n(0,s=t),J()}))};b((()=>{o()}));return[s,o,()=>{K(),V("/submit-wifi?ssid="+s.ssid+"&password="+s.password,"GET").then((t=>{console.log(t),J()}))},()=>{K(),V("/reboot","GET").then((t=>{console.log(t),J()}))},function(){s.ssid=this.value,n(0,s)},function(){s.password=this.value,n(0,s)}]}class Z extends z{constructor(t){super(),W(this,t,Y,X,i,{})}}function tt(e){let n;return{c(){n=l("div"),n.innerHTML='<div class="subtitle">Settings Device Sections</div>',h(n,"class","container")},m(t,e){u(t,n,e)},p:t,i:t,o:t,d(t){t&&a(n)}}}class et extends z{constructor(t){super(),W(this,t,null,tt,i,{})}}function nt(e){let n,o,i,c,d,m;return{c(){n=l("nav"),o=l("a"),o.innerHTML='<span class="white svelte-1ik7u5w">Wifi</span>',i=f(),c=l("a"),c.innerHTML='<span class="white svelte-1ik7u5w">API</span>',h(o,"class","nav-item svelte-1ik7u5w"),h(c,"class","nav-item svelte-1ik7u5w"),h(n,"class","svelte-1ik7u5w")},m(t,e){u(t,n,e),r(n,o),r(n,i),r(n,c),d||(m=[p(o,"click",Q),p(c,"click",U)],d=!0)},p:t,i:t,o:t,d(t){t&&a(n),d=!1,s(m)}}}class st extends z{constructor(t){super(),W(this,t,null,nt,i,{})}}function ot(e){let n,s;return{c(){n=l("div"),s=l("div"),s.innerHTML='<div class="svelte-osqt5y"></div> \n    <div class="svelte-osqt5y"></div>',h(s,"class","lds-ripple svelte-osqt5y"),h(n,"class","loader svelte-osqt5y"),g(n,"--isLoading",e[0]?"flex":"none")},m(t,e){u(t,n,e),r(n,s)},p(t,[e]){1&e&&g(n,"--isLoading",t[0]?"flex":"none")},i:t,o:t,d(t){t&&a(n)}}}function it(t,e,n){let s;return c(t,F,(t=>n(0,s=t))),[s]}class ct extends z{constructor(t){super(),W(this,t,it,ot,i,{})}}function rt(t){let e,n;return e=new et({}),{c(){N(e.$$.fragment)},m(t,s){j(e,t,s),n=!0},i(t){n||(D(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function ut(t){let e,n;return e=new Z({}),{c(){N(e.$$.fragment)},m(t,s){j(e,t,s),n=!0},i(t){n||(D(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function at(t){let e,n,o,i,c,d,p,m;n=new ct({});const $=[ut,rt],g=[];function v(t,e){return"home"==t[0]?0:1}return i=v(t),c=g[i]=$[i](t),p=new st({}),{c(){e=l("div"),N(n.$$.fragment),o=f(),c.c(),d=f(),N(p.$$.fragment),h(e,"class","outer")},m(t,s){u(t,e,s),j(n,e,null),r(e,o),g[i].m(e,null),r(e,d),j(p,e,null),m=!0},p(t,[n]){let o=i;i=v(t),i!==o&&(A={r:0,c:[],p:A},M(g[o],1,1,(()=>{g[o]=null})),A.r||s(A.c),A=A.p,c=g[i],c||(c=g[i]=$[i](t),c.c()),D(c,1),c.m(e,d))},i(t){m||(D(n.$$.fragment,t),D(c),D(p.$$.fragment,t),m=!0)},o(t){M(n.$$.fragment,t),M(c),M(p.$$.fragment,t),m=!1},d(t){t&&a(e),G(n),g[i].d(),G(p)}}}function lt(t,e,n){let s;return c(t,B,(t=>n(0,s=t))),[s]}return new class extends z{constructor(t){super(),W(this,t,lt,at,i,{})}}({target:document.body,props:{name:"keepomap router"}})}();
